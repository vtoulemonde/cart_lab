<div ng-app="bookApp" ng-controller="BooksController as ctrl" class="container">
  <!-- Search field -->
  <input type="text" ng-model="searchString">

  <!-- Sort by -->
  <select ng-model="type">
    <option value="title">Sort By Title</option>
    <option value="author">Sory By Author</option>
  </select>

  <div class="row">
    <!-- List of books -->
    <!-- <div class="col-xs-4 col-sm-4 col-md-3 col-lg-2 book" ng-repeat="book in books | filter:searchString | orderBy:type"> -->
     
    <div class="col-xs-4 col-sm-4 col-md-3 col-lg-2 book" ng-repeat="book in ctrl.books | orderBy:type">
      <div class="col-xs-offset-1 book-title">
        {{book.title}}
      </div>
      <div class="col-xs-offset-1 book-author">
        By: {{book.author}}
      </div>
      <div>
        <img class="book-image" ng-src="{{book.img}}"/>
      </div>
      <div class="cart-button">
        <span class="price">{{book.price | currency}}
        <button ng-click="ctrl.addToCart(book)">Add</button> <!-- Add to cart button  -->
      </div>
    </div>

    <!-- My cart -->
    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 cart">
      <h3>your cart has {{ctrl.itemCount}} items. </h3>
      <table class="carttable">
        <tr>
          <th width='40%'>Title</th><th width='30%'>Author</th><th width='20%'>Price</th><th width='10%'>Qty</th><th></th>
        </tr>
        <tr ng-repeat="item in ctrl.items">
          <td colspan=1>{{item.book.title}}</td>
          <td colspan=1>{{item.book.author}}</td>
          <td colspan=1>{{item.book.price}}</td>
          <td colspan=1>{{item.qty}}</td>
          <td colspan=1><button ng-click="ctrl.removeFromCart(item)">-</button></td>
        </tr>
        <tr class="cart-total">
          <td colspan=2 width='80%'>Total</td><td width='20%'>{{ctrl.total | currency}}</td>
        </tr>
      </table>
      <div class="btn-group cart-button">
        <button ng-click="ctrl.emptyCart()">Empty</button>
      </div>
    </div>
    
  </div>
</div>